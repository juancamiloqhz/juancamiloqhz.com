# AI Coding Agent Instructions

This file provides guidance to AI coding agents working with code in this repository.

## Project Overview

Personal website for JuanCamiloQHz — a clean editorial site (homepage + blog). Built with Next.js 16 (React 19, App Router, Turbopack), TypeScript, Tailwind CSS v4, shadcn/ui (new-york style, unified `radix-ui` package + CVA), and Fumadocs MDX for blog content. English only. Package manager is Bun.

## Build / Lint / Test Commands

```bash
# Development (uses Turbopack)
bun dev

# Production build (also runs next-sitemap + RSS generation via postbuild)
bun run build

# Start production server
bun start

# Lint (ESLint 9 flat config + next/core-web-vitals)
bun run lint

# Generate Fumadocs MDX types (runs automatically via postinstall)
bun x fumadocs-mdx
```

There is **no test runner configured** (no Jest, Vitest, or Playwright). If tests are added, update this section.

## Project Structure

```text
eslint.config.mjs       # ESLint 9 flat config (next/core-web-vitals)
source.config.ts        # Fumadocs MDX collection definitions + MDX plugins
data/
  blog/                 # MDX blog posts (processed by Fumadocs MDX)
src/
  app/                  # Next.js App Router pages and layouts
    layout.tsx          # Root layout (fonts, ThemeProvider, analytics)
    (main)/             # Route group for main site pages
      layout.tsx        # Main layout (Nav + Footer)
      page.tsx          # Homepage (hero + recent posts + contact)
      name.tsx          # NameTransition animation component
      blog/
        page.tsx        # Blog listing page
        [slug]/
          page.tsx      # Individual blog post page
  components/
    ui/                 # shadcn/ui primitives (Button, Dialog, Card, etc.)
    nav.tsx             # Site navigation (name link, blog link, theme toggle)
    theme-provider.tsx  # next-themes ThemeProvider wrapper
    theme-toggle.tsx    # Dark/light mode toggle button
    analytics.tsx       # Vercel Analytics
    tailwind-indicator.tsx  # Dev-only screen size indicator
  config/
    site.ts             # Site metadata (name, description, URLs)
  hooks/                # Custom React hooks (use-toast, use-mobile)
  lib/
    utils.ts            # cn(), formatDate(), absoluteUrl()
    source.ts           # Fumadocs blog data access layer (loader + getPages/getPage)
  types/
    index.d.ts          # Global TypeScript type declarations
  styles/
    globals.css         # Tailwind v4 theme (OKLCH colors, dark mode, animations)
  env.mjs               # Type-safe env variables via @t3-oss/env-nextjs + Zod
  mdx-components.tsx    # Custom MDX component overrides (headings, links, code, tables)
.source/                # Generated by Fumadocs MDX (gitignored)
public/                 # Static files served at root
```

## Code Style Guidelines

### Linting (ESLint 9)

- **Flat config** in `eslint.config.mjs` — imports `eslint-config-next/core-web-vitals` directly
- **`next lint` does not exist** in Next.js 16 — use `bun run lint` (runs `eslint .`)
- **`src/components/ui/`** is excluded from linting to keep shadcn/ui components untouched
- `.source/`, `.next/`, `node_modules/` are also excluded

### Formatting (Prettier)

- **No semicolons** (`semi: false`)
- **Double quotes** (`singleQuote: false`)
- **2-space indentation** (`tabWidth: 2`)
- **Trailing commas** in ES5-valid positions (`trailingComma: "es5"`)
- **LF line endings** (`endOfLine: "lf"`)
- Tailwind class sorting is handled by `prettier-plugin-tailwindcss`
- **`src/components/ui/`** is excluded from Prettier (via `.prettierignore`) to keep shadcn/ui components as-is

### Import Order (enforced by @ianvs/prettier-plugin-sort-imports)

Imports are auto-sorted in this order:

1. `react` / `react/*`
1. `next` / `next/*`
1. Third-party modules
1. _(blank line)_
1. `types`
1. `@/env*`
1. `@/types/*`
1. `@/config/*`
1. `@/lib/*`
1. `@/hooks/*`
1. `@/components/ui/*`
1. `@/components/*`
1. `@/styles/*`
1. `@/app/*`
1. _(blank line)_
1. Relative imports (`./`, `../`)

Run Prettier to auto-fix import order. Do not manually reorder imports.

### Path Aliases

Use the `@/` alias for all imports from `src/`:

```ts
import { cn } from "@/lib/utils"
import { Button } from "@/components/ui/button"
```

Never use relative imports to reach outside the current directory's module boundary when `@/` works.

### TypeScript

- **Strict mode** is enabled (`"strict": true`)
- **Module resolution**: `bundler` (required for Fumadocs MDX imports)
- Use `type` keyword for type-only exports: `export type { Foo }`
- Inline type imports: `import { type ClassValue } from "clsx"`
- Prefer `type` aliases over `interface` for object shapes (project convention)
- Global types go in `src/types/index.d.ts`
- Use Zod for runtime validation of environment variables (`src/env.mjs`)

### React & Components

- **Function declarations** for page components and layouts: `export default function PageName()`
- **Plain functions with `React.ComponentProps`** for UI primitives (shadcn/ui new-york style — no `React.forwardRef` needed with React 19)
- **`data-slot` attributes** on shadcn/ui component root elements for styling and testing hooks
- **`"use client"` directive** required at top of any file using hooks, browser APIs, or event handlers
- Props are typed inline: `{ children }: { children: React.ReactNode }`
- Use `import * as React from "react"` (not `import React from "react"`)
- Component files are kebab-case: `nav.tsx`, `theme-toggle.tsx`
- UI primitives are kebab-case: `button.tsx`, `alert-dialog.tsx`

### Naming Conventions

- **Files**: kebab-case for components (`nav.tsx`, `theme-toggle.tsx`), utilities (`utils.ts`), hooks (`use-toast.ts`), and UI primitives (`button.tsx`)
- **Components**: PascalCase (`Nav`, `ThemeToggle`, `ThemeProvider`)
- **Hooks**: camelCase prefixed with `use` (`useToast`, `useIsMobile`)
- **Constants/Config**: camelCase (`siteConfig`)
- **Types**: PascalCase (`SiteConfig`, `NavItem`)

### Styling

- **Tailwind CSS v4** for all styling — no CSS modules or styled-components
- **No `tailwind.config.js`** — all theme configuration lives in `src/styles/globals.css` via `@theme inline`
- **`cn()` utility** (from `@/lib/utils`) to merge Tailwind classes: `cn("base-class", conditional && "conditional-class")`
- **CSS variables** for theme colors via OKLCH values (defined in globals.css, consumed as `var(--primary)` directly — no `hsl()` wrapper needed in v4)
- **Dark mode** via `@custom-variant dark (&:is(.dark *))` in globals.css
- **shadcn/ui** components use `class-variance-authority` (CVA) for variants, `new-york` style
- **Tailwind class order** is enforced by `prettier-plugin-tailwindcss`
- **Animations** via `tw-animate-css` (replaces `tailwindcss-animate` from v3)

### Icons

Use `lucide-react` icons directly:

```ts
import { Sun, Moon } from "lucide-react"
```

### Error Handling

- Environment variables validated at build time via `@t3-oss/env-nextjs` + Zod (`src/env.mjs`)

### Content (Fumadocs MDX)

- Blog posts live in `data/blog/*.mdx`
- Collection defined in `source.config.ts` using `defineCollections` with Zod schema
- Required frontmatter: `title`, `summary`, `publishedAt`
- Optional frontmatter: `mainImage`, `featured`, `categories`, `tags`
- Data access via `src/lib/source.ts`: `blog.getPages()`, `blog.getPage([slug])`
- MDX plugins: `remark-gfm`, `rehype-slug`, `rehype-autolink-headings`
- Code syntax highlighting via `sugar-high` (client-side, configured in `mdx-components.tsx`)
- MDX component overrides defined in `src/mdx-components.tsx` — uses `cn()` for className merging
- Generated types live in `.source/` (gitignored, regenerated on `postinstall` and `next dev`)
- Import collections in server code: `import { blogPosts } from "fumadocs-mdx:collections/server"`

### Environment Variables

Define env vars in `.env` (see `.env.example`). Validate them with Zod in `src/env.mjs`:

```ts
import { env } from "@/env.mjs"
```

Required client-side variable: `NEXT_PUBLIC_APP_URL`

### Key Dependencies to Know

| Dependency                 | Purpose                                     |
| -------------------------- | ------------------------------------------- |
| `next@16`                  | Framework (App Router + Turbopack dev)       |
| `react@19`                 | UI library                                   |
| `tailwindcss@4`            | Utility-first CSS (v4, config-in-CSS)        |
| `tw-animate-css`           | Animation utilities for Tailwind v4          |
| `fumadocs-mdx`             | MDX content collections + compilation        |
| `fumadocs-core`            | Content source loader (getPages, getPage)    |
| `sugar-high`               | Lightweight code syntax highlighting         |
| `radix-ui`                 | Headless UI primitives (unified package)     |
| `class-variance-authority` | Component variant styling                    |
| `framer-motion`            | Animations                                   |
| `next-themes`              | Dark/light/system theme                      |
| `next-view-transitions`    | Page transition animations                   |
| `zod`                      | Schema validation                            |
